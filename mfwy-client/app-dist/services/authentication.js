angular.module(auth_name).factory(auth_services_authentication,["$q","$http","ipCookie",function(e,t,n){var r;return createUser=function(e,t,n){return{name:e,permissions:t,router:n}},autoLogin=function(){var i,s;return i=e.defer(),s=n("authorization"),console.log("token",s),s?(t.defaults.headers.common.authorization=s,t.post("http://localhost:40002/v1/auto-login",void 0).success(function(e){return console.log("data",e),r=createUser(e.account,e.permission,e.router),console.log(r),i.resolve(r)}).error(function(e){return n.remove("authorization",{path:"/"}),i.reject(void 0)})):i.reject(void 0),i.promise},login=function(i){console.log(i);var s;return s=e.defer(),t.post("http://localhost:40002/v1/login",{account:i.account,password:i.password}).success(function(e,o,u){console.log("login",e);var a,f;return f=u("authorization"),t.defaults.headers.common.authorization=f,a={path:"/",domain:""},i.remember&&(a.expires=180),n("authorization",f,a),r=createUser(e.account,e.permission,e.router),s.resolve(r)}).error(function(e){return s.reject(void 0)}),s.promise},logout=function(){var i;return i=e.defer(),t.post("http://localhost:40002/v1/logout",void 0).success(function(e){return n.remove("authorization",{path:"/"}),delete t.defaults.headers.common.authorization,r=undefined,i.resolve("OK")}),i.promise},getCurrentLoginUser=function(){return r},DeleteCurrentLoginUser=function(e){return n.remove("authorization",{path:"/"}),delete t.defaults.headers.common.authorization,r=undefined},{autoLogin:autoLogin,login:login,logout:logout,getCurrentLoginUser:getCurrentLoginUser,DeleteCurrentLoginUser:DeleteCurrentLoginUser}}]);