define(["app"],function(e){e.controller("MyorderController",["$scope","$location","myorderService","ipCookie","orderService",function(e,t,n,r,i){return e.myorder=[],e.dialog={selfOrder:!1,message:""},e.orderDedail={num:"",openid:"",order_type:0,images:[],no:"",payInfo:{payType:""},temInfo:{id:"",type:"",price:""},totalMoney:0,card:{c_type:"",gongyi:""},userInfo:{name:"",id:"",address:"",phone:"",QQ:"",company:"",note:""},expressInfo:{no:"",state:""},states:0,note:""},e.imagesPath=config.url.api+"/v1/images?name=",e.all=function(){$(".all").addClass("border_bottom").siblings().removeClass("border_bottom"),n.list(r("openid")).then(function(t){console.log("all",t),e.myorder=t,console.log(e.myorder)})},e.topaid=function(){$(".to-paid").addClass("border_bottom").siblings().removeClass("border_bottom"),n.notPay(r("openid")).then(function(t){console.log("topaid",t),e.myorder=t,console.log(e.myorder)})},e.waitDelivery=function(){$(".shipped").addClass("border_bottom").siblings().removeClass("border_bottom"),n.waitDelivery(r("openid")).then(function(t){e.myorder=t,console.log(e.myorder)})},e.received=function(){$(".received").addClass("border_bottom").siblings().removeClass("border_bottom"),n.takeDelivery(r("openid")).then(function(t){e.myorder=t,console.log(e.myorder)})},e.cancelOrder=function(){e.dialog.message="取消订单请联系询问客服",e.dialog.selfOrder=!0},e.cancelDialog=function(){e.dialog.message="",e.dialog.selfOrder=!1},e.wechatPay=function(t){alert(t);var n={id:t};i.secondPay(n).then(function(t){WeixinJSBridge.invoke("getBrandWCPayRequest",t,function(t){t.err_msg=="get_brand_wcpay_request:ok"?e.all():(e.dialog.message="支付失败，请重新支付",e.dialog.selfOrder=!0)})})},e.secondCOD=function(t,n){i.deliveryPay(t,n).then(function(t){e.dialog.message="货到付款订单成功",e.dialog.selfOrder=!0,e.all()},function(t){e.dialog.message="订单失败，请重新订单",e.dialog.selfOrder=!0,e.all()})},e.confirm=function(t){n.confirm(t).then(function(t){e.dialog.message="确认收货成功",e.dialog.selfOrder=!0,e.all()},function(t){e.dialog.message="确认收获失败,请重新确认",e.dialog.selfOrder=!0,e.all()})},e.deleteOrder=function(t){n.deleteOrder(t).then(function(t){e.dialog.message="删除成功",e.dialog.selfOrder=!0,e.all()},function(t){e.dialog.message="删除成功失败,请重新删除",e.dialog.selfOrder=!0,e.all()})},e.orderDetail=function(r){n.detailedOrder(r).then(function(n){t.path("/app/order/detail"),e.orderDedail=n,console.log(n),console.log(e.orderDedail)},function(e){})},n.list(r("openid")).then(function(t){e.myorder=t,console.log(t)})}])});